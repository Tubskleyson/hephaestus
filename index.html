<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Hephaestus</title>
</head>
<body>
	<script type="text/javascript" src="scripts/automaton.js"></script>
	<script type="text/javascript" src="scripts/estado.js"></script>
	<script type="text/javascript">
		
		function read(e){
			
			var input = event.target;

	        var reader = new FileReader();
	        reader.onload = function(){
	          var text = reader.result.split('\n')
	          
	          var linha1 = text[0].slice(1,-3).split(', ')

	          var stuff = [];
	          var tmp = [];

	          var open = 0


	          for(i of linha1){


	          	var inicio = i.includes('{')
	          	var fim = i.includes('}')

	          	if(inicio && fim) stuff.push([i.slice(1,-1)])
	          	else if(inicio){
	          		tmp = [i.slice(1)]
	          		open = 1
	          	}
	          	else if(fim){
	          		tmp.push(i.slice(0,-1))
	          		stuff.push(tmp)
	          		tmp = []
	          		open = 0
	          	}
	          	else if(open) tmp.push(i)
	          	
	          	else stuff.push(i)
	          	
	          }
	  

	          text.shift()

	          var trans = []

	          for(i of text) trans.push(i.split(', '))

			  console.log(stuff, trans)

			  var automat = new Automaton(stuff[1],stuff[0],stuff[3], stuff[4], stuff[5], trans)
			  
			  automat.ler('aa')


	        };
	        reader.readAsText(input.files[0]);
		}

	</script>
	<input type="file" name="automat" onchange="read(event)">
</body>
</html>